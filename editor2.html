<!DOCTYPE html>
<html>
        <head>
                <meta charset="utf-8">
                <title>CKEditor</title>
                <script   src="https://code.jquery.com/jquery-3.5.1.min.js"   integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="   crossorigin="anonymous"></script>
                <script src="https://cdn.ckeditor.com/ckeditor5/19.0.0/classic/ckeditor.js"></script>
        </head>
        <body>
          <div class="ce-example__button" id="loadButton">
            editor.load()
          </div>
                <div id="editor">This is some sample content.</div>
                <script>
                  function loadData() {
                    $.ajax({
                        url: 'http://localhost:4006/getjson/123',
                        type: 'GET',
                        // contentType: 'application/json; charset=utf-8',
                        // data: data,
                        success: function (response) {
                          var data = $.parseJSON(response);
                          console.log('Load 1234 : ' + JSON.stringify(data) );
                          // alert('Success' + JSON.stringify(data) );
                          // editor.setData(JSON.stringify(data));
                          // ClassicEditor.data = data;
                          // return JSON.stringify(data);
                          // ClassicEditor.editor.setData("Foo");
                          editor.setData("Example");
                          return "Example ";
                        },
                        error: function (xhr) {
                            alert('Error: There was some error while posting. Please try again later.');
                        }
                    });
                  };
                  ClassicEditor
                    .create( document.querySelector( '#editor' ) )
                    .then( editor => {
                      var data = loadData();
                      console.log("Foo: " + data)
                      editor.setData("" + data + "");
                      console.log( editor );
                    })
                    .catch( error => {
                      console.error( error );
                    });
                  loadButton.addEventListener('click', function () {
                  // function loadData() {
                    $.ajax({
                        url: 'http://localhost:4006/getjson/123',
                        type: 'GET',
                        // contentType: 'application/json; charset=utf-8',
                        // data: data,
                        success: function (response) {
                          var data = $.parseJSON(response);
                          console.log('Load 1234 : ' + JSON.stringify(data) );
                          // alert('Success' + JSON.stringify(data) );
                          // editor.setData(JSON.stringify(data));
                          ClassicEditor.data = data;
                          return JSON.stringify(data);
                        },
                        error: function (xhr) {
                            alert('Error: There was some error while posting. Please try again later.');
                        }
                    });
                  });
                </script>
        </body>
</html>
