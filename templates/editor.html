<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Editor.js ðŸ¤©ðŸ§¦ðŸ¤¨ example</title>
  <link href="https://fonts.googleapis.com/css?family=PT+Mono" rel="stylesheet">
  <link href="/static/assets/demo.css" rel="stylesheet">
  <script src="/static/assets/json-preview.js"></script>
  <script   src="https://code.jquery.com/jquery-3.5.1.min.js"   integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="   crossorigin="anonymous"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
</head>
<body>
  <div class="ce-example">
    <div class="ce-example__header">
      <!-- <a class="ce-example__header-logo" href="https://codex.so/editor"> -->
      <button class="ce-example__header-logo ce-example__button" id="saveButton" style="position:fixed; top:5px; right:5px; z-index: 999;">
        Save
      </button>
      <!-- </a> -->
      <!-- <a class="ce-example__header-logo" href="https://codex.so/editor">Editor.js ðŸ¤©ðŸ§¦ðŸ¤¨</a> -->

      <div class="ce-example__header-menu">
        <a href="/editor/list" >Artikelliste</a>
        <a href="/editor/new" >Neuer Article</a>
        <!-- <a href="https://editorjs.io/usage" target="_blank">Usage</a>
        <a href="https://editorjs.io/configuration" target="_blank">Configuration</a>
        <a href="https://editorjs.io/creating-a-block-tool" target="_blank">API</a> -->
      </div>
    </div>
    <div class="ce-example__content _ce-example__content--small">
      <!-- <div class="ce-example__button" id="loadButton">
        editor.load()
      </div> -->

      <div id="editorjs"></div>

      <!-- <div class="ce-example__button" id="saveButton">
        editor.save()
      </div> -->
    </div>
    <div class="ce-example__output">
      <!-- <pre class="ce-example__output-content" id="output"></pre> -->

      <!-- <div class="ce-example__output-footer">
        <a href="https://codex.so" style="font-weight: bold;">Made by CodeX</a>
      </div> -->
    </div>
  </div>

  <!-- Load Tools -->
  <!--
   You can upload Tools to your project's directory and use as in example below.

   Also you can load each Tool from CDN or use NPM/Yarn packages.

   Read more in Tool's README file. For example:
   https://github.com/editor-js/header#installation
   -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/header@latest"></script><!-- Header -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/simple-image@latest"></script><!-- Image -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/delimiter@latest"></script><!-- Delimiter -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/list@latest"></script><!-- List -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/checklist@latest"></script><!-- Checklist -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/quote@latest"></script><!-- Quote -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/code@latest"></script><!-- Code -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/embed@latest"></script><!-- Embed -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/table@latest"></script><!-- Table -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/link@latest"></script><!-- Link -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/warning@latest"></script><!-- Warning -->

  <script src="https://cdn.jsdelivr.net/npm/@editorjs/marker@latest"></script><!-- Marker -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/inline-code@latest"></script><!-- Inline Code -->

  <!-- Load Editor.js's Core -->
  <script src="/static/dist/editor.js"></script>
  <!-- Initialization -->
  <script>
    /**
     * Saving button
     */
    const saveButton = document.getElementById('saveButton');

    /**
     * To initialize the Editor, create a new instance with configuration object
     * @see docs/installation.md for mode details
     */
    var editor = new EditorJS({
      /**
       * Wrapper of Editor
       */
      holder: 'editorjs',
      placeholder: ' ... schreibe los...',
      /**
       * Tools list
       */
      tools: {
        /**
         * Each Tool is a Plugin. Pass them via 'class' option with necessary settings {@link docs/tools.md}
         */
        header: {
          class: Header,
          inlineToolbar: ['link'],
          config: {
            placeholder: 'Header'
          },
          shortcut: 'CMD+SHIFT+H'
        },

        /**
         * Or pass class directly without any configuration
         */
        image: SimpleImage,

        list: {
          class: List,
          inlineToolbar: true,
          shortcut: 'CMD+SHIFT+L'
        },

        checklist: {
          class: Checklist,
          inlineToolbar: true,
        },

        quote: {
          class: Quote,
          inlineToolbar: true,
          config: {
            quotePlaceholder: 'Enter a quote',
            captionPlaceholder: 'Quote\'s author',
          },
          shortcut: 'CMD+SHIFT+O'
        },

        warning: Warning,

        marker: {
          class:  Marker,
          shortcut: 'CMD+SHIFT+M'
        },

        code: {
          class:  CodeTool,
          shortcut: 'CMD+SHIFT+C'
        },

        delimiter: Delimiter,

        inlineCode: {
          class: InlineCode,
          shortcut: 'CMD+SHIFT+C'
        },

        linkTool: {
          class: LinkTool,
          config: {
            endpoint: '/fetchUrl', // Your backend endpoint for url data fetching
          },
        },

        embed: Embed,

        table: {
          class: Table,
          inlineToolbar: true,
          shortcut: 'CMD+ALT+T'
        },

      },

      /**
       * This Tool will be used as default
       */
      // initialBlock: 'paragraph',
      data:
        {{ data|safe }}
      ,
      onReady: function(){
        // saveButton.click();
      },
      onChange: function() {
        console.log('something changed');
      }
    });
    /**
     * Saving example
     */
    saveButton.addEventListener('click', function () {
      editor.save().then((savedData) => {
        // cPreview.show(savedData, document.getElementById("output"));
        var data = JSON.stringify(savedData);
        $.ajax({
            url: '/postjson/{{ id }}',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: data,
            success: function (response) {
                alert('Success');
            },
            error: function (xhr) {
                alert('Error: There was some error while posting. Please try again later.');
            }
        });
      });
    });
  </script>

</body>
</html>
